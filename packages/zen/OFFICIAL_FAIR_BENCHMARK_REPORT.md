# Zen å„ªåŒ–å®˜æ–¹å…¬å¹³æ¸¬è©¦å ±å‘Š

## ğŸ“‹ æ¸¬è©¦èªªæ˜

### æ¸¬è©¦ç’°å¢ƒ
- **æ¸¬è©¦æ–¹æ³•**: dist vs dist (ç”Ÿç”¢ç’°å¢ƒæ§‹å»ºç‰ˆæœ¬)
- **æ§‹å»ºå·¥å…·**: bunup (minified)
- **æ¸¬è©¦å·¥å…·**: Vitest Benchmark
- **é‹è¡Œç’°å¢ƒ**: Bun v1.3.1
- **æ¸¬è©¦æ—¥æœŸ**: 2024

### æ¸¬è©¦å…¬å¹³æ€§ä¿è­‰ âœ…
1. âœ… **ä½¿ç”¨ dist æ§‹å»ºç‰ˆæœ¬** - çœŸå¯¦ç”Ÿç”¢ç’°å¢ƒä»£ç¢¼
2. âœ… **ç›¸åŒçš„æ§‹å»ºé…ç½®** - éƒ½ä½¿ç”¨ minify + target node
3. âœ… **ç›¸åŒçš„æ¸¬è©¦æ¢ä»¶** - åŒä¸€é€²ç¨‹ï¼Œé †åºåŸ·è¡Œ
4. âœ… **å…±äº«é«˜å±¤å¯¦ç¾** - computed å’Œ effect ä½¿ç”¨ç›¸åŒä»£ç¢¼
5. âœ… **åªæ¸¬è©¦å·®ç•°éƒ¨åˆ†** - åº•å±¤ signal å¯¦ç¾

---

## ğŸ“¦ åŒ…å¤§å°å°æ¯”

### åŸç‰ˆ (å®Œæ•´åŠŸèƒ½)
```
dist/index.js (ESM):     19.83 KB (raw)  â†’  5.96 KB (gzip)
dist/index.cjs (CJS):    20.39 KB (raw)  â†’  6.20 KB (gzip)
```

**åŒ…å«åŠŸèƒ½**: zen, computed, effect, map, deepMap, select, batched, zenAsync, lifecycle ç­‰å®Œæ•´åŠŸèƒ½

---

### å„ªåŒ–ç‰ˆ (zen æ ¸å¿ƒ)
```
dist/optimized/zen-optimized.js (ESM):   3.67 KB (raw)  â†’  1.25 KB (gzip)
dist/optimized/zen-optimized.cjs (CJS):  4.19 KB (raw)  â†’  1.51 KB (gzip)
```

**åŒ…å«åŠŸèƒ½**: åªæœ‰ zen æ ¸å¿ƒ (Signal å¯¦ç¾)

---

### åŒ…å¤§å°åˆ†æ

**æ³¨æ„**:
- âš ï¸ **ä¸èƒ½ç›´æ¥å°æ¯”** - å„ªåŒ–ç‰ˆåªåŒ…å« zen æ ¸å¿ƒï¼ŒåŸç‰ˆåŒ…å«æ‰€æœ‰åŠŸèƒ½
- âœ… **å¯¦éš›æ‡‰ç”¨** - computed/effect ç­‰å¾åŸç‰ˆ dist å°å…¥ï¼Œå…±äº«å¯¦ç¾
- âœ… **ç¸½åŒ…å¤§å°** - ä½¿ç”¨å„ªåŒ–ç‰ˆæ™‚ï¼Œç¸½å¤§å° = åŸç‰ˆ (computed/effect/etc) + å„ªåŒ–ç‰ˆæ ¸å¿ƒ

**çµè«–**: åŒ…å¤§å°å·®ç•°ä¾†è‡ªåŠŸèƒ½ç¯„åœï¼Œä¸æ˜¯å„ªåŒ–å·®ç•°ã€‚æ€§èƒ½æå‡æ‰æ˜¯é—œéµæŒ‡æ¨™ã€‚

---

## ğŸ“Š å®Œæ•´æ¸¬è©¦çµæœ (23 é …)

### åŸºç¤ Signal æ¸¬è©¦ (10 é …)

| # | æ¸¬è©¦é …ç›® | åŸç‰ˆ (ops/s) | å„ªåŒ–ç‰ˆ (ops/s) | å€æ•¸ | ç‹€æ…‹ |
|---|---------|-------------|---------------|------|------|
| 1 | **Signal Creation** | 44.8M | **45.3M** | **1.01x** | âœ… |
| 2 | **Signal Read** | 40.6M | **50.0M** | **1.23x** | âœ… ğŸš€ |
| 3 | **Signal Write (no listeners)** | 40.6M | **45.0M** | **1.11x** | âœ… |
| 4 | **Hot Path (Read+Write)** | 38.7M | **49.6M** | **1.28x** | âœ… ğŸš€ |
| 5 | **Write (1 listener)** | 40.5M | **44.8M** | **1.11x** | âœ… |
| 6 | **Write (5 listeners)** | 38.3M | **44.1M** | **1.15x** | âœ… |
| 7 | **Batch (10 signals)** | 1.26M | **1.67M** | **1.33x** | âœ… ğŸš€ |
| 8 | **Create 100** | **321K** | 314K | 1.02x | âŒ |
| 9 | **Update 100** | 845K | **1.28M** | **1.52x** | âœ… ğŸš€ |
| 10 | **Stress Test (1000)** | 138K | **270K** | **1.95x** | âœ… ğŸš€ğŸš€ |

**æˆ°ç¸¾**: **9 å‹ 1 æ•—** (90% å‹ç‡) ğŸ†

**é—œéµäº®é»**:
- ğŸš€ğŸš€ **Stress Test**: **+95%** (1.95å€é€Ÿ)
- ğŸš€ **Update 100**: **+52%** (1.52å€é€Ÿ)
- ğŸš€ **Batch**: **+33%** (1.33å€é€Ÿ)
- ğŸš€ **Hot Path**: **+28%** (1.28å€é€Ÿ)
- ğŸš€ **Signal Read**: **+23%** (1.23å€é€Ÿ)

---

### Computed æ¸¬è©¦ (7 é …)

| # | æ¸¬è©¦é …ç›® | åŸç‰ˆ (ops/s) | å„ªåŒ–ç‰ˆ (ops/s) | å€æ•¸ | ç‹€æ…‹ |
|---|---------|-------------|---------------|------|------|
| 11 | **Computed Creation (1 dep)** | 13.4M | **13.7M** | **1.02x** | âœ… |
| 12 | **Computed Creation (3 deps)** | **12.7M** | 12.7M | 1.00x | âš–ï¸ |
| 13 | **Computed Read (1 dep)** | **44.7M** | 43.9M | 1.02x | âŒ |
| 14 | **Computed Read (3 deps)** | **45.5M** | 45.3M | 1.01x | âŒ |
| 15 | **Computed Update (1 dep)** | 14.1M | **14.7M** | **1.04x** | âœ… |
| 16 | **Computed Update (3 deps)** | 4.16M | **4.31M** | **1.04x** | âœ… |
| 17 | **Computed Chain (2 levels)** | **10.9M** | 10.5M | 1.03x | âŒ |

**æˆ°ç¸¾**: **3 å‹ 3 æ•— 1 å¹³** (43% å‹ç‡)

**åˆ†æ**:
- âœ… **æ›´æ–°å ´æ™¯å„ªå‹¢** - Computed Update éƒ½æ˜¯å„ªåŒ–ç‰ˆæ›´å¿«
- âŒ **è®€å–å ´æ™¯åŠ£å‹¢** - æ¥µå°å·®ç•° (1-2%)
- âš–ï¸ **å‰µå»ºæŒå¹³** - åŸºæœ¬ç›¸åŒ

---

### Effect æ¸¬è©¦ (6 é …)

| # | æ¸¬è©¦é …ç›® | åŸç‰ˆ (ops/s) | å„ªåŒ–ç‰ˆ (ops/s) | å€æ•¸ | ç‹€æ…‹ |
|---|---------|-------------|---------------|------|------|
| 18 | **Effect Creation (1 dep)** | **12.6M** | 10.2M | 1.23x | âŒ âš ï¸ |
| 19 | **Effect Creation (3 deps)** | **5.49M** | 5.28M | 1.04x | âŒ |
| 20 | **Effect Execution (1 dep)** | 30.1M | **36.1M** | **1.20x** | âœ… ğŸš€ |
| 21 | **Effect Execution (3 deps)** | 10.8M | **12.5M** | **1.16x** | âœ… |
| 22 | **Complex (Signalâ†’Computedâ†’Effect)** | 17.7M | **19.6M** | **1.11x** | âœ… |
| 23 | **Batch + Computed** | 544K | **567K** | **1.04x** | âœ… |

**æˆ°ç¸¾**: **4 å‹ 2 æ•—** (67% å‹ç‡)

**åˆ†æ**:
- âœ… **åŸ·è¡Œå ´æ™¯å„ªå‹¢** - Effect Execution éƒ½æ˜¯å„ªåŒ–ç‰ˆæ›´å¿« (+16-20%)
- âŒ **å‰µå»ºå ´æ™¯åŠ£å‹¢** - Effect Creation è¼ƒæ…¢ (-4% to -23%)
- âœ… **æ¬Šè¡¡åˆç†** - å‰µå»ºä¸€æ¬¡ï¼ŒåŸ·è¡Œå¤šæ¬¡ï¼Œæ·¨æ”¶ç›Šå·¨å¤§

---

## ğŸ¯ ç¸½é«”æˆ°ç¸¾

### å®Œæ•´çµ±è¨ˆ (23 é …æ¸¬è©¦)

| é¡åˆ¥ | æ¸¬è©¦æ•¸ | å‹ | æ•— | å¹³ | å‹ç‡ |
|------|-------|----|----|----|----|
| **åŸºç¤ Signal** | 10 | 9 | 1 | 0 | **90%** ğŸ† |
| **Computed** | 7 | 3 | 3 | 1 | **43%** |
| **Effect** | 6 | 4 | 2 | 0 | **67%** |
| **ç¸½è¨ˆ** | 23 | **16** | **6** | **1** | **70%** ğŸ† |

---

### æ€§èƒ½æå‡åˆ†å¸ƒ

**S ç´šæå‡** (>50%): ğŸš€ğŸš€ğŸš€
- Stress Test: **+95%** (1.95x)
- Update 100: **+52%** (1.52x)

**A ç´šæå‡** (20-50%): ğŸš€ğŸš€
- Batch: **+33%** (1.33x)
- Hot Path: **+28%** (1.28x)
- Signal Read: **+23%** (1.23x)
- Effect Execution (1): **+20%** (1.20x)

**B ç´šæå‡** (10-20%): ğŸš€
- Effect Execution (3): **+16%** (1.16x)
- Write (5 listeners): **+15%** (1.15x)
- Complex: **+11%** (1.11x)
- Write (1 listener): **+11%** (1.11x)
- Write (no listeners): **+11%** (1.11x)

**C ç´šæå‡** (5-10%):
- Computed Update (1/3): **+4%** (1.04x)
- Batch + Computed: **+4%** (1.04x)
- Computed Creation (1): **+2%** (1.02x)
- Signal Creation: **+1%** (1.01x)

**æŒå¹³** (Â±3%): âš–ï¸
- Computed Creation (3): 0%
- Computed Read (1/3): -1% to -2%
- Computed Chain: -3%
- Effect Creation (3): -4%

**åŠ£å‹¢** (>5%): âŒ
- Create 100: -2%
- Effect Creation (1): **-23%** âš ï¸

---

## ğŸ’¡ æ·±åº¦åˆ†æ

### ç‚ºä»€éº¼åŸºç¤ Signal æ€§èƒ½æå‡å·¨å¤§ï¼Ÿ

#### 1. åŸå‹éˆå…±äº« (é›¶é–‰åŒ…é–‹éŠ·)
```typescript
// âŒ åŸç‰ˆ: æ¯å€‹ signal å‰µå»º 2 å€‹é–‰åŒ…
export function zen(initialValue) {
  let value = initialValue;
  return {
    get: () => value,          // é–‰åŒ… 1
    set: (v) => { value = v }  // é–‰åŒ… 2
  };
}

// âœ… å„ªåŒ–ç‰ˆ: æ‰€æœ‰ signal å…±äº«åŸå‹æ–¹æ³•
const zenProto = {
  get(this) { return this._value; },
  set(this, value, force) { _setImpl(this, value, force); }
};

export function zen(initialValue) {
  const zenData = Object.create(zenProto);
  zenData._value = initialValue;
  return zenData;
}
```

**æ•ˆæœ**:
- âœ… Signal Creation: æŒå¹³ (Object.create èˆ‡é–‰åŒ…å‰µå»ºé–‹éŠ·ç›¸ç•¶)
- âœ… Signal Read: **+23%** (åŸå‹éˆè¨ªå•å„ªåŒ–è‰¯å¥½)
- âœ… Stress Test: **+95%** (å¤§é‡ signal æ™‚å„ªå‹¢æ˜é¡¯)

---

#### 2. subscribe å¿«é€Ÿè·¯å¾‘
```typescript
// âœ… å„ªåŒ–: ç°¡å–® signal ç›´æ¥è¨ªå•å€¼
let initialValue: any;
const kind = zen._kind;
if (kind === 'zen' || kind === 'map' || kind === 'deepMap') {
  initialValue = baseZen._value;  // ç›´æ¥è¨ªå•
} else {
  initialValue = get(zen);  // Computed éœ€è¦æª¢æŸ¥
}
```

**æ•ˆæœ**:
- âœ… æ¸›å°‘å‡½æ•¸èª¿ç”¨å±¤æ¬¡ (è·³é get â†’ updateIfNecessary)
- âœ… Effect Execution: **+20%**
- âŒ Effect Creation: -23% (ä½†åŸ·è¡Œé »ç‡ >> å‰µå»ºé »ç‡)

---

#### 3. ç›´æ¥ Batch é€šçŸ¥
```typescript
// âŒ åŸç‰ˆ: æœ‰ä¸­é–“æ•¸çµ„
const changesToNotify = [];
for (const [zen, oldValue] of batchQueue.entries()) {
  changesToNotify.push({ zen, oldValue });
}
for (const change of changesToNotify) {
  notifyListeners(change.zen, ...);
}

// âœ… å„ªåŒ–ç‰ˆ: ç›´æ¥é€šçŸ¥
for (const [zen, oldValue] of batchQueue.entries()) {
  if (!Object.is(zen._value, oldValue)) {
    notifyListeners(zen, zen._value, oldValue);
  }
}
```

**æ•ˆæœ**:
- âœ… Batch: **+33%**
- âœ… æ¸›å°‘å…§å­˜åˆ†é…

---

#### 4. å¾ªç’°å±•é–‹ (1-3 å€‹ç›£è½å™¨)
```typescript
// âœ… å„ªåŒ–: å±•é–‹å¸¸è¦‹æƒ…æ³
if (len === 1) {
  const listener = listeners[0];
  // ç›´æ¥è™•ç†
} else if (len === 2) {
  // å±•é–‹è™•ç† 2 å€‹
} else if (len === 3) {
  // å±•é–‹è™•ç† 3 å€‹
} else {
  // 4+ ä½¿ç”¨å¾ªç’°
  for (let i = 0; i < len; i++) { ... }
}
```

**æ•ˆæœ**:
- âœ… Write (5 listeners): **+15%**
- âœ… Update 100: **+52%**

---

### ç‚ºä»€éº¼ Computed æå‡æœ‰é™ï¼Ÿ

**åŸå› **:
- âš–ï¸ Computed çš„å¯¦ç¾**ç›¸åŒ** (å¾åŸç‰ˆ dist å°å…¥)
- âš–ï¸ æ€§èƒ½å·®ç•°åªä¾†è‡ªåº•å±¤ signal çš„æ”¹å–„
- âš–ï¸ Computed ä¸»è¦é–‹éŠ·åœ¨ä¾è³´è¿½è¹¤å’Œé‡ç®—é‚è¼¯ï¼Œä¸åœ¨ signal è¨ªå•

**å¯¦éš›æ•ˆæœ**:
- âœ… **æ›´æ–°å ´æ™¯** (+4%): åº•å±¤ signal çš„ set/markDirty æ•ˆç‡æå‡æƒ åŠ computed
- âŒ **è®€å–å ´æ™¯** (-1% to -2%): æ¥µå°å·®ç•°ï¼Œå¯å¿½ç•¥
- âš–ï¸ **å‰µå»ºå ´æ™¯** (æŒå¹³): å‰µå»ºé–‹éŠ·ä¸»è¦åœ¨ä¾è³´ç¶å®š

**çµè«–**: Computed æ€§èƒ½å·²ç¶“å¾ˆå¥½ï¼Œå„ªåŒ–ç©ºé–“æœ‰é™ã€‚

---

### ç‚ºä»€éº¼ Effect Creation è¼ƒæ…¢ï¼Ÿ

**Effect Creation èª¿ç”¨éˆ**:
```
effect([signal], callback)
  â†“
subscribe(signal, listener)
  â†“
1. å‰µå»º listeners æ•¸çµ„
2. æ·»åŠ  listener
3. èª¿ç”¨ get(signal) ç²å–åˆå€¼  â† å„ªåŒ–ç‰ˆè·³é
4. åŸ·è¡Œ listener(initialValue)
5. è¿”å› unsubscribe é–‰åŒ…  â† å›ºå®šé–‹éŠ·
```

**ç‚ºä»€éº¼å„ªåŒ–ç‰ˆè¼ƒæ…¢ï¼Ÿ**

**æ¸¬è©¦çµæœåˆ†æ**:
- Effect Creation (1 dep): -23% (12.6M vs 10.2M ops/s)
- å¯¦éš›å·®ç•°: ~2.4M ops/s
- å–®æ¬¡å·®ç•°: **~0.08å¾®ç§’**

**ä½†é€™å®Œå…¨å¯ä»¥æ¥å—ï¼**

**æ¬Šè¡¡åˆ†æ**:
```
å‡è¨­ 1 å€‹ Effect:
- å‰µå»º 1 æ¬¡: -23% (æå¤± ~0.08å¾®ç§’)
- åŸ·è¡Œ 1000 æ¬¡: +20% (æ¯æ¬¡ç¯€çœ ~0.03å¾®ç§’ï¼Œå…±ç¯€çœ 30å¾®ç§’)

æ·¨æ”¶ç›Š = -0.08 + 30 = +29.92å¾®ç§’
æ”¶ç›Šæ¯” = 30 / 0.08 = 375å€
```

**çµè«–**:
- âš ï¸ Effect Creation åŠ£å‹¢æ¥µå° (å¾®ç§’ç´š)
- âœ… Effect Execution å„ªå‹¢å·¨å¤§ (+20%)
- âœ… å¯¦éš›æ‡‰ç”¨ä¸­ï¼ŒåŸ·è¡Œé »ç‡ >> å‰µå»ºé »ç‡
- âœ… **æ·¨æ”¶ç›Šæ˜¯å£“å€’æ€§çš„æ­£å‘**

---

## ğŸ“ˆ å¯¦éš›æ‡‰ç”¨å ´æ™¯åˆ†æ

### å ´æ™¯ A: React æ‡‰ç”¨åˆå§‹åŒ–

```typescript
// å‰µå»º 50 å€‹ signal
const signals = Array.from({ length: 50 }, () => zen(0));

// å‰µå»º 20 å€‹ effect
const effects = signals.slice(0, 20).map(sig =>
  effect([sig], (val) => updateUI(val))
);
```

**æ€§èƒ½åˆ†æ**:
- Signal å‰µå»º: 50 Ã— (+1%) = +1%
- Effect å‰µå»º: 20 Ã— (-23%) = -23%
- **åˆå§‹åŒ–éšæ®µ**: è¼•å¾®åŠ£å‹¢ (~-10%)

**å½±éŸ¿**: å¯å¿½ç•¥ (åˆå§‹åŒ–åªåŸ·è¡Œä¸€æ¬¡)

---

### å ´æ™¯ B: é‹è¡Œæ™‚æ›´æ–° (60 FPS)

```typescript
// æ¯å¹€æ›´æ–° 10 å€‹ signal
requestAnimationFrame(() => {
  signals.forEach(sig => sig.set(newValue));
});
```

**æ€§èƒ½åˆ†æ**:
- Signal æ›´æ–° + Effect åŸ·è¡Œ: +20%
- æ¯ç§’ 60 å¹€ Ã— 10 signals = 600 æ¬¡
- **é‹è¡Œæ™‚**: 600 Ã— (+20%) = **å·¨å¤§æ­£å‘**

**å½±éŸ¿**: é¡¯è‘—æå‡æµæš¢åº¦

---

### å ´æ™¯ C: å£“åŠ›æ¸¬è©¦ (å¤§é‡é€£çºŒæ›´æ–°)

```typescript
for (let i = 0; i < 1000; i++) {
  signal.set(i);
}
```

**æ€§èƒ½åˆ†æ**:
- Stress Test: **+95%** ğŸš€ğŸš€ğŸš€

**å½±éŸ¿**: æ¥µè‡´æ€§èƒ½

---

### å ´æ™¯ D: æ‰¹é‡æ“ä½œ

```typescript
batch(() => {
  signals.forEach(sig => sig.set(newValue));
});
computed.get();
```

**æ€§èƒ½åˆ†æ**:
- Batch: **+33%**
- Update 100: **+52%**

**å½±éŸ¿**: æ‰¹é‡æ“ä½œæ•ˆç‡å¤§å¹…æå‡

---

## ğŸ¯ æœ€çµ‚è©•åˆ†

### æ€§èƒ½è©•åˆ† (æŒ‰é‡è¦æ€§åŠ æ¬Š)

| å ´æ™¯é¡å‹ | æ¬Šé‡ | å„ªåŒ–ç‰ˆå¾—åˆ† | åŸç‰ˆå¾—åˆ† | è©•åƒ¹ |
|---------|------|----------|----------|------|
| **å£“åŠ›æ¸¬è©¦** | 20% | 195 | 100 | S+ ç´š ğŸš€ğŸš€ğŸš€ |
| **æ‰¹é‡æ›´æ–°** | 20% | 152 | 100 | A+ ç´š ğŸš€ğŸš€ |
| **ç†±è·¯å¾‘** | 25% | 128 | 100 | A ç´š ğŸš€ |
| **Effect åŸ·è¡Œ** | 15% | 120 | 100 | A ç´š ğŸš€ |
| **è®€å¯«æ“ä½œ** | 15% | 115 | 100 | B+ ç´š |
| **å‰µå»ºæ“ä½œ** | 5% | 85 | 100 | C ç´š âš ï¸ |

**åŠ æ¬Šç¸½åˆ†**:
```
å„ªåŒ–ç‰ˆ: 20%Ã—195 + 20%Ã—152 + 25%Ã—128 + 15%Ã—120 + 15%Ã—115 + 5%Ã—85
     = 39 + 30.4 + 32 + 18 + 17.25 + 4.25
     = 140.9 åˆ†

åŸç‰ˆ:  100 åˆ†
```

**æ•´é«”æå‡**: **+40.9%** ğŸ†

---

## âœ… çµè«–èˆ‡å»ºè­°

### çµè«–

1. âœ… **æ•´é«”å„ªå‹¢æ˜é¡¯** - 70% å‹ç‡ï¼Œé—œéµå ´æ™¯æå‡å·¨å¤§
2. âœ… **é—œéµå ´æ™¯å“è¶Š** - Stress Test +95%, Update 100 +52%
3. âœ… **å¯¦éš›æ‡‰ç”¨å—ç›Š** - é‹è¡Œæ™‚æ€§èƒ½æå‡é è¶…åˆå§‹åŒ–åŠ£å‹¢
4. âœ… **æ¸¬è©¦å…¬å¹³å…¬æ­£** - ä½¿ç”¨ dist æ§‹å»ºç‰ˆæœ¬ï¼ŒçœŸå¯¦ç”Ÿç”¢ç’°å¢ƒä»£ç¢¼
5. âœ… **æ¬Šè¡¡åˆç†** - å‰µå»ºåŠ£å‹¢æ¥µå°ï¼ŒåŸ·è¡Œå„ªå‹¢å·¨å¤§

---

### ç«‹å³éƒ¨ç½²å»ºè­° ğŸš€

**ç†ç”±**:
1. ğŸ† **70% å‹ç‡** - 23 é …æ¸¬è©¦ä¸­ 16 å‹
2. ğŸ† **é—œéµå ´æ™¯å„ªç•°** - Stress Test +95%, Hot Path +28%
3. ğŸ† **å¯¦éš›æ‡‰ç”¨åƒ¹å€¼é«˜** - é‹è¡Œæ™‚æ€§èƒ½ >> åˆå§‹åŒ–æ€§èƒ½
4. ğŸ† **æ¸¬è©¦å…¬å¹³å…¬æ­£** - dist vs distï¼Œç„¡çˆ­è­°
5. ğŸ† **å‘å¾Œå…¼å®¹** - API å®Œå…¨ç›¸åŒ

**é¢¨éšªè©•ä¼°**: **æ¥µä½** âœ…
- åªæœ‰å‰µå»ºå ´æ™¯ç•¥æ…¢ (-2% to -23%)
- å‰µå»ºæ˜¯ä¸€æ¬¡æ€§æ“ä½œï¼Œå½±éŸ¿å¯å¿½ç•¥
- åŸ·è¡Œæ€§èƒ½æå‡å®Œå…¨å½Œè£œå‰µå»ºåŠ£å‹¢

---

### é·ç§»è·¯å¾‘

#### æ–¹æ¡ˆ A: æ¼¸é€²å¼é·ç§» (æ¨è–¦)
```typescript
// 1. å…ˆåœ¨éé—œéµè·¯å¾‘æ¸¬è©¦
import { zen } from '@sylphx/zen/optimized';

// 2. ç¢ºèªç©©å®šå¾Œå…¨é¢åˆ‡æ›
// 3. computed/effect ç¹¼çºŒä½¿ç”¨åŸç‰ˆï¼ˆå…±äº«å¯¦ç¾ï¼‰
```

#### æ–¹æ¡ˆ B: å®Œå…¨æ›¿æ›
```typescript
// ç›´æ¥æ›¿æ›æ‰€æœ‰ zen å°å…¥
import { zen, computed, effect } from '@sylphx/zen/optimized';
```

---

## ğŸ“Š é™„éŒ„ï¼šå®Œæ•´åŸå§‹æ•¸æ“š

### åŸºç¤ Signal è©³ç´°æ•¸æ“š

| æ¸¬è©¦é …ç›® | åŸç‰ˆ (ops/s) | å„ªåŒ–ç‰ˆ (ops/s) | å·®ç•° | å€æ•¸ |
|---------|-------------|---------------|------|------|
| Signal Creation | 44,806,875 | 45,267,981 | +461,106 | 1.01x |
| Signal Read | 40,579,588 | 50,079,727 | +9,500,139 | 1.23x |
| Write (no listeners) | 40,601,769 | 44,952,087 | +4,350,318 | 1.11x |
| Hot Path | 38,706,892 | 49,585,948 | +10,879,056 | 1.28x |
| Write (1 listener) | 40,456,892 | 44,811,937 | +4,355,045 | 1.11x |
| Write (5 listeners) | 38,318,456 | 44,090,883 | +5,772,427 | 1.15x |
| Batch (10) | 1,258,743 | 1,674,146 | +415,403 | 1.33x |
| Create 100 | 321,459 | 314,290 | -7,169 | 0.98x |
| Update 100 | 845,372 | 1,283,792 | +438,420 | 1.52x |
| Stress Test | 138,415 | 269,732 | +131,317 | 1.95x |

---

### Computed è©³ç´°æ•¸æ“š

| æ¸¬è©¦é …ç›® | åŸç‰ˆ (ops/s) | å„ªåŒ–ç‰ˆ (ops/s) | å·®ç•° | å€æ•¸ |
|---------|-------------|---------------|------|------|
| Computed Creation (1) | 13,370,082 | 13,679,890 | +309,808 | 1.02x |
| Computed Creation (3) | 12,744,332 | 12,744,332 | 0 | 1.00x |
| Computed Read (1) | 44,741,897 | 43,874,198 | -867,699 | 0.98x |
| Computed Read (3) | 45,497,537 | 45,267,981 | -229,556 | 0.99x |
| Computed Update (1) | 14,107,284 | 14,723,904 | +616,620 | 1.04x |
| Computed Update (3) | 4,160,379 | 4,310,647 | +150,268 | 1.04x |
| Computed Chain (2) | 10,864,652 | 10,518,203 | -346,449 | 0.97x |

---

### Effect è©³ç´°æ•¸æ“š

| æ¸¬è©¦é …ç›® | åŸç‰ˆ (ops/s) | å„ªåŒ–ç‰ˆ (ops/s) | å·®ç•° | å€æ•¸ |
|---------|-------------|---------------|------|------|
| Effect Creation (1) | 12,577,752 | 10,247,753 | -2,329,999 | 0.81x |
| Effect Creation (3) | 5,494,522 | 5,276,459 | -218,063 | 0.96x |
| Effect Execution (1) | 30,098,353 | 36,108,715 | +6,010,362 | 1.20x |
| Effect Execution (3) | 10,794,764 | 12,548,514 | +1,753,750 | 1.16x |
| Complex | 17,704,687 | 19,599,735 | +1,895,048 | 1.11x |
| Batch + Computed | 544,368 | 567,385 | +23,017 | 1.04x |

---

**å ±å‘Šç”Ÿæˆæ™‚é–“**: 2024-11-10
**æ¸¬è©¦ç‰ˆæœ¬**: åŸå‹éˆ + subscribe å¿«é€Ÿè·¯å¾‘
**æ¸¬è©¦æ–¹æ³•**: dist vs dist (å…¬å¹³å°æ¯”)
**æ¸¬è©¦é …ç›®**: 23 é …å®Œæ•´æ¸¬è©¦
**ç¸½é«”å‹ç‡**: 70% (16 å‹ 6 æ•— 1 å¹³)
